(()=>{var e={547:e=>{function t(e,t,r){e.parentElement.querySelector(".".concat(r)).textContent=t,e.classList.add(r)}function r(e,t){e.parentElement.querySelector(".".concat(t)).textContent="",e.classList.remove(t)}function n(e,t,r){e.every((function(e){return e.validity.valid}))?(t.removeAttribute("disabled"),t.classList.remove(r)):(t.setAttribute("disabled",!0),t.classList.add(r))}e.exports={enableValidation:function(e){Array.from(document.querySelectorAll(e.formSelector)).forEach((function(o){!function(e,o){var c=Array.from(e.querySelectorAll(o.inputSelector)),i=e.querySelector(o.submitButtonSelector);c.forEach((function(e){e.addEventListener("input",(function(){!function(e,n){e.validity.valid?r(e,n.errorClass):e.validity.valueMissing||e.validity.patternMismatch?t(e,e.dataset.errorMessage||e.validationMessage,n.errorClass):"place-name"===e.name&&e.value.trim().length>0&&e.value.trim().length<e.minLength&&t(e,e.dataset.errorMessage||e.title,n.errorClass)}(e,o),n(c,i,o.inactiveButtonClass)}))})),e.addEventListener("reset",(function(){c.forEach((function(e){r(e,o.errorClass)})),i.setAttribute("disabled",!0),i.classList.add(o.inactiveButtonClass)})),n(c,i,o.inactiveButtonClass)}(o,e)}))},clearValidation:function(e,t){var n=Array.from(e.querySelectorAll(t.inputSelector)),o=e.querySelector(t.submitButtonSelector);n.forEach((function(e){r(e,t.errorClass)})),o.setAttribute("disabled",!0),o.classList.add(t.inactiveButtonClass)}}}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var c=t[n]={exports:{}};return e[n](c,c.exports,r),c.exports}(()=>{"use strict";function e(e){if(e.ok)return e.json();throw new Error("Ошибка: ".concat(e.status))}function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?n(Object(o),!0).forEach((function(r){var n,c,i,u;n=e,c=r,i=o[r],u=function(e,r){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(c),(c="symbol"==t(u)?u:String(u))in n?Object.defineProperty(n,c,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[c]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var c={baseUrl:"https://nomoreparties.co/v1/wff-cohort-10",headers:{authorization:"936d1ed8-a428-4bb8-ad74-c2df3594c068","Content-Type":"application/json"}};function i(t,r){return fetch(t,r).then(e)}var u=function(e,t){return i("".concat(c.baseUrl,"/users/me"),{method:"PATCH",headers:o({},c.headers),body:JSON.stringify({name:e,about:t})})},a=function(e,t){return i("".concat(c.baseUrl,"/cards"),{method:"POST",headers:o({},c.headers),body:JSON.stringify({name:e,link:t})})},l=function(e){return i("".concat(c.baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:c.headers})},s=function(e){return i("".concat(c.baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:c.headers})},d=function(e){return i("".concat(c.baseUrl,"/cards/").concat(e),{method:"DELETE",headers:c.headers})},p=function(e){return i("".concat(c.baseUrl,"/users/me/avatar"),{method:"PATCH",headers:o({},c.headers),body:JSON.stringify({avatar:e})})};function f(e,t){e.querySelector(".card__like-counter").textContent=t}function y(e,t){t?e.classList.add("card__like-button_is-active"):e.classList.remove("card__like-button_is-active")}function m(e){var t=document.querySelector('[data-card-id="'.concat(e,'"]')),r=t.querySelector(".card__like-button"),n=r.classList.contains("card__like-button_is-active");(n?s:l)(e).then((function(e){f(t,e.likes.length),y(r,!n)})).catch((function(e){return console.error("Ошибка при изменении лайка:",e)}))}function _(e,t,r,n){var o=e.name,c=e.link,i=e.likes,u=e.owner,a=e._id,l=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=document.querySelector("#card-template").content.querySelector(".card").cloneNode(!0),d=s.querySelector(".card__image");d.src=c,d.alt=o,s.querySelector(".card__title").textContent=o,d.addEventListener("click",(function(){return r(c,o)}));var p=s.querySelector(".card__delete-button");u._id===t&&l?p.addEventListener("click",(function(){return n(a)})):p.remove();var _=s.querySelector(".card__like-button");return _.addEventListener("click",(function(){return m(a)})),y(_,i.some((function(e){return e._id===t}))),f(s,i.length),s.setAttribute("data-card-id",a),s}function v(e){function t(t){"Escape"===t.key&&b(e)}e.classList.add("popup_is-opened"),e.closePopupByEsc=t,document.addEventListener("keydown",t)}function b(e){e.classList.remove("popup_is-opened"),document.removeEventListener("keydown",e.closePopupByEsc),delete e.closePopupByEsc}var h,S,q=r(547),E=document.querySelector(".profile__edit-button"),g=document.querySelector(".profile__add-button"),L=document.querySelectorAll(".popup__close"),k=document.querySelector(".popup_type_edit"),C=document.querySelector(".popup_type_new-card"),O=document.querySelector(".popup_type_image"),P=k.querySelector(".popup__form"),j=P.querySelector(".popup__input_type_name"),w=P.querySelector(".popup__input_type_description"),A=document.querySelector(".profile__title"),x=document.querySelector(".profile__description"),B=document.querySelector(".places__list"),D=C.querySelector(".popup__form"),U=document.querySelector(".popup_type_confirm-delete"),T=U.querySelector(".popup__button_confirm-delete"),M=document.querySelector(".profile__edit-icon"),N=document.querySelector(".popup_type_avatar"),J=N.querySelector(".popup__form"),V=J.querySelector(".popup__input_type_avatar-link"),H=O.querySelector(".popup__image"),z=O.querySelector(".popup__caption"),I=document.querySelector(".profile__image");function F(e){I.style.backgroundImage="url(".concat(e.avatar,")"),A.textContent=e.name,x.textContent=e.about,S=e._id}function G(e){h=e,v(U)}function K(e){e.preventDefault(),u(j.value,w.value).then(F).then((function(){return b(k)})).catch((function(e){return console.error("Ошибка при сохранении информации о пользователе:",e)}))}function Q(e){e.preventDefault();var t=D.elements["place-name"].value,r=D.elements.link.value;a(t,r).then((function(e){B.prepend(_(e,S,R,G,m)),b(C)})).catch((function(e){return console.error("Ошибка при добавлении новой карточки:",e)})).finally((function(){return D.reset()}))}function R(e,t){H.src=e,H.alt=t,z.textContent=t,v(O)}function W(e){e.preventDefault(),d(h).then((function(){return document.querySelector('[data-card-id="'.concat(h,'"]')).remove()})).then((function(){return b(U)})).catch((function(e){return console.error("Ошибка при удалении карточки:",e)}))}function X(){v(N)}function Y(e){e.preventDefault(),p(V.value).then(F).then((function(){return b(N)})).catch((function(e){return console.error("Ошибка при обновлении аватара пользователя:",e)}))}(0,q.enableValidation)({formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"}),E.addEventListener("click",(function(){j.value=A.textContent,w.value=x.textContent,v(k)})),g.addEventListener("click",(function(){return v(C)})),L.forEach((function(e){e.addEventListener("click",(function(){return b(e.closest(".popup"))}))})),P.addEventListener("submit",K),D.addEventListener("submit",Q),J.addEventListener("submit",Y),T.addEventListener("click",W),document.querySelector(".profile__image-overlay").addEventListener("click",X),M.addEventListener("click",X),document.querySelectorAll(".popup").forEach((function(e){e.addEventListener("click",(function(t){t.target===e&&b(e)}))})),i("".concat(c.baseUrl,"/users/me"),{headers:c.headers}).then(F),i("".concat(c.baseUrl,"/cards"),{headers:c.headers}).then((function(e){e.forEach((function(e){B.appendChild(_(e,S,R,G,m))}))})).catch((function(e){return console.error("Ошибка инициализации приложения:",e)}))})()})();